<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot</title>
    <style>
        body { font-family: sans-serif; background-color: #f0f2f5; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .chat-container { width: 100%; max-width: 400px; height: 80vh; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .chat-window { flex-grow: 1; padding: 20px; overflow-y: auto; }
        .message { margin-bottom: 15px; display: flex; flex-direction: column; }
        .user-message { align-items: flex-end; }
        .ai-message { align-items: flex-start; }
        .bubble { padding: 10px 15px; border-radius: 18px; max-width: 70%; line-height: 1.4; }
        .user-bubble { background-color: #007aff; color: white; border-bottom-right-radius: 4px; }
        .ai-bubble { background-color: #e5e5ea; color: black; border-bottom-left-radius: 4px; }
        .input-bar { display: flex; padding: 10px; border-top: 1px solid #ddd; }
        .input-bar form { display: flex; flex-grow: 1; gap: 10px; }
        .input-bar input { flex-grow: 1; border: none; padding: 10px; font-size: 1em; outline: none; }
        .input-bar button { background: none; border: none; cursor: pointer; padding: 10px; }
        .input-bar button svg { width: 24px; height: 24px; }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-window">
            {% for message in history %}
                {% if message.role == 'user' %}
                    <div class="message user-message">
                        <div class="bubble user-bubble">
                            <span>{{ message.text }}</span>
                        </div>
                    </div>
                {% else %}
                    <div class="message ai-message">
                        <div class="bubble ai-bubble">
                            <span>{{ message.text }}</span>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        
        <div class="input-bar">
            <form action="/" method="POST">
                <input type="text" name="prompt" placeholder="พิมพ์ข้อความ..." required autocomplete="off">
                <button type="submit">
                    <svg viewBox="0 0 24 24"><path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                </button>
            </form>
        </div>
    </div>
</body>
</html>